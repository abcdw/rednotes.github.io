---
layout: post
title: "vim story #2 /Survive/"
date: "Вт дек 02 23:08:16 +0300 2014"
image: /downloads/icons/vim.png
tags: vim, help, init
published: false
---

Первое, что вы должны сделать - это выжить в этом жестоком мире. Ни для кого не секрет, что дефолтный сетап `vim` выглядит, мягко говоря, ужасающе, да и поведение у него не самое предсказуемое. Предложу пару идей, чтобы помочь вам остаться в живых и при этом получить минимум психологических и физических увечий.

## Prepare your tools
Давайте собирать все необходимое! Хм, думаю мы возьмем даже чуть больше, чем нужно для просто выживания, будем выживать со вкусом :wink: Постарайтесь ничего не пропускать, так как ниже описываются тонкие моменты, которые будут сильно влиять на ваши дальнейшие отношение с `vim`.

### Install Vim
Для начала нужно как минимум установить `vim`. Даже если вы считаете, что у вас уже все стоит - не стоит пропускать эту секцию. Скорее всего у вас стоит не `vim`, а `vi`, `vim-minimal`, `ex`, `vim-tiny`, да что угодно, только не полноценный, свежий `vim`. Поэтом найдите как установить свежую huge-версию с поддержкой большинства фичей для вашего дистрибутива. На ubuntu нужно ставить `vim-nox`, на мак нужно ставить `vim` или `macvim` из `brew`.

Можно юзать и то, что стоит по-дефолту, но там будет работать далеко не все из того, что мы будем использовать, лучше иметь версию посвежее и как минимум с поддержкой +python, +clipboard и прочими прелестями.

`ubuntu$``sudo apt-get install vim-nox`

`os-x$``brew install vim --override-system-vim`

Обладатели других дистрибутивов и операционных систем надеюсь справятся сами. А не справятся - значит не очень то и хотелось или рано еще такими вещами заниматься.

В данный момент я использую [neovim][neovim]. Возможно, у вас пока нету причин делать тоже самое, но имейте в виду, что есть такой форк. Кажется у него очень неплохие перспективы.

### Install Fonts
Поставьте хорошие моноширные [шрифты][fonts] с поддержкой powerline-symbols. У меня нету каких-то конкретных предпочтений, но с недавнего времени я использую `Ubuntu Mono`, шрифт хорош тем, что он весьма компактен в плане ширины и его удобно использовать на 13" мониторе ноута.

Могу порекомендовать `Anonymous Pro`, `Inconsolata`. Но выбирайте на свой вкус, даже не обязательно из этого списка. Powerline-symbols дадут нам немного красоты в перспективе, поэтому было бы неплохо, чтобы они были. Не оставляйте дефолтный шрифт, он скорее всего будет ужасно убог, уважайте свои глаза и чувство прекрасного.

`Vim` использует шрифты терминала. Сразу оговорюсь, что под `gvim` я буду обобщенно подразумевать GUI-версию(MacVim, GVim, ...). `gvim` использует переменную `guifont`, ее обычно можно выставить через графическую менюшку или написать `set guifont=Ubuntu\ Mono\ derivative\ Powerline:h14` в `~/.gvimrc`

### Configure Keyboard
<!-- Вынести бы этот раздел в отдельный пост по-хорошему. -->
Как же не поговорить о клавиатуре? Это же основной инструмент при работе с текстом. Меньше движений - больше действий. Руки должны оставаться всегда в удобном положении и минимально покидать `home row`. Это не только увеличивает эффективность, но и положительно сказывается а здоровье ваших запястий. Не подстраивайтесь под инструменты и "стандарты", подстраивайте их под себя! Гните свою линию.

#### Layout
Не тяните legacy из девятнадцатого века, выбирайте что-нибудь более продуманное и удобное, нежели `qwerty`. Стоит еще раз упомянуть, что я использую dvorak for programmers и вам советую, хотя и не настаиваю, в местах, где раскладка имеет значение я буду отдельно упоминать некоторые особенности. Почему дворак хорош можно почитать [тут][dvorak]. Почему dvp, а не ANSI dvorak - [там][dvp]. Если будет много желающих узнать о моем опыте перехода, то напишу отдельный постик. Так же, из-за нестандартного расположения `hjkl`, новaя раскладка сподвигла меня к изучению более мощных возможностей перемещения.

#### Caps Lock
Крайне настоятельно рекомендую разумно использовать `Caps Lock`: одиночное нажатие - `Escape`, удержание - `Control`. По жизни(а в `vim` и подавно) `Esc` и `Control` используются чаще `Caps Lock`, но при этом находятся на очень неудобных позициях, от слова совсем. Такой мапинг позволит переместить две очень важные клавиши на `home row` и сильно облегчит жизнь вам и вашим рукам.

Чтобы это сделать вам понадобится [xcape][xcape] и [xmodmap][xmodmap] или [Karabiner][karabiner] под макось. Это будет полезно и в повседневной жизни, так что не пожалейте времени.


## Prepare your mind
Помните, что `with great flexibility comes great responsibility`. Хочу заранее предостеречь вас от соблазна поставить сразу супермега конфиг с кучей плагинов - это wrong way. Не торопитесь - спешка ни к чему. Освоение должно происходить медленно, поэтапно, с набиванием шишек и осознанием того, что происходит на самом деле. Как в любой хорошей RPG с низкими рейтами, да и просто в жизни - нельзя получить все и сразу.

Пожалуйста забудьте свои старые привычки, здесь они не только не работаю, но мешают. Не стоит думать о `vim`, как о блокноте с крутыми фичами, это может сыграть с вами злую шутку. Относитесь к этому инструменту, как к чему-то новому, принципиально отличающемуся от стандартов. Тут свои концепции и подход к решению проблем.

Давайте для начала разберемся с основами.

### vimtutor
`vimtutor` - это простая утилита, поставляемая с `vim`, она позволяет скопировать один текстовый файл(учебник по основам `vim` на 20-30 минут, может чуть больше) и открыть этот файл прям в редакторе. Если у вас все более менее с английским, то лучше запускать `vimtutor en`, там нет ошибок перевода :smirk: Настоятельно рекомендую пройти этот учебник, даже если вы его уже проходили. Именно пройти, а не прочитать. Не пытайтесь выучить все, что там есть, со временем все само придет.

Пропускать этот важный шаг ни в коем случае не стоит, даже, если вы когда-то и проходили этот учебник, так как без основ далеко не уйдешь. Мне важно, чтобы вы ознакомились со всей информацией, которая содержится там, мы начнем ее использовать с минуты на минуту. Поэтому идем в терминал и вбиваем `vimtutor`, внимательно изучаем и осваиваем, а потом возвращаемся и дочитываем этот прелестный пост.

## Write your own ~/.vimrc
Теперь мы знаем для чего нужен файл `~/.vimrc`. У пользователей более экзотических операционных систем(например Windows) этот файл может находиться в другом месте, но, если они выбрали столь сложную ОС, то достаточно квалифицированы, чтобы самостоятельно разобраться с этим вопросом. Сейчас мы постараемся написать максимально независимый от окружения конфиг и выработаем некоторые принципы его написания. Вопросы управления плагинами,контроля версий конфига и его деплоя мы пока рассматривать не будем.

Ближайшая цель будет выглядит примерно так(конечно, по скриншоту можно оценить только внешний вид, но и им не стоит пренебрегать):
[![vim][vim_zenburn]][vim_zenburn]

Но в рамках данного поста мы не успеем ее достичь. Сейчас мы будет закладывать основные принципы.

### Copy-paste
В мире программирования возникает множество ошибок из-за столь соблазнительной операции, казалось бы, скопировал уже написанное и пользуйся. Нет! Так делать нельзя и есть множество причин почему, мы рассмотрим только некоторые из них.

Во-первых нельзя просто переселиться в чужой дом и начать жить. Нужно привести свои вещи, осмотреть все комнаты, а вдруг в детской под кроватью лежит заряженный `glock 18` или разбитый ртутный градусник? Мало того, что у вас будет куча лишнего барахла, распиханного по всем углам, так некоторое из этого барахла может оказаться крайне опасным. Во-вторых подумайте сколько вещей в квартире вы не использовали год или два? Наверняка у вас не одна такая вещь.

Ладно, что я опять занудствую, давайте уже что-нибудь наконец-то напишем. Открываем файл на редактирование `$``vim ~/.vimrc`, а если `vim` уже запущен, то просто пишем `:e ~/.vimrc`, переходим в режим `INSERT` и копируем туда следующий код:

```Vim
"""""""""""""""""""""""
" MY MICRO VIMRC v0.1 "
"""""""""""""""""""""""
set nocompatible
set wildmenu
set keywordprg=:help
set ruler
colorscheme desert
" alternatives: slate industry
syntax on
```

`:wq`, вуаля. Вроде бы я сам себе противоречу, сначала говорю "ничего не копируй", потом копируй. А все дело в том, что в притче про рыбу и удочку предполагается, что голодный в состоянии ловить рыбу(не смертельно голоден). Так вот этот небольшой кусочек был нужен для того, чтобы дать сил на обучение рыбной ловле. Для интереса, через некоторое время закомментируйте все строчки в `~/.vimrc`, а потом поделитесь впечатлениями и ощущениями :smiley:


## Help me, plz!
Даже самым крутым парням из мира `vim` приходится просить о помощи. В одиночку, к сожалению, не выжить. Но прежде чем тратить драгоценное время более опытных собратьев, постарайтесь найти решение самостоятельно. Ваши товарищи, прежде чем отправить вас в это суровое путешествие, изложили многолетний опыт лучших из лучших в книге под названием `:help`. Только избранные могут прочесть книгу целиком. Простым же смертным книга открывает лишь малую часть знаний. Но и этого многим более чем достаточно.

### Как читать книгу
Множество раз слышал в `vim` великолепная документация. Но до некоторого момента практически ею не пользовался и не ощущал всей ее прелестности. А ведь даже просто ее полистать, не вчитываясь - это крайне приятно. Как качественно она оформлена, как легко по ней передвигаться. На первой же странице рассказано как получить конкретную страницу с тем самым содержим, что вы ищете, как перейти к подробной информации об элементе под курсором, как вернуться обратно.

Чуть ниже список самых базовых страниц, которые стоит посмотреть(quickref, tutor, ...). Чуть ниже USER MANUAL, после идет REFERENCE MANUAL, а там еще одна секция для демонстрации функции перехода к элементу под курсором.


First Header | Second Header
------------ | -------------


X^(V * T)

https://github.com/romainl/idiomatic-vimrc/blob/master/vimrc

https://github.com/romainl/minivimrc/blob/master/vimrc

https://github.com/romainl/editor-history

Кто-то обязательно решит задачу, если найдет ее интересной.

## Забавности и полезности

vim-casts

[wiki]:         https://ru.wikibooks.org/wiki/Vim
[fonts]:        https://github.com/powerline/fonts
[dvorak]:       http://www.dvzine.org/zine/
[dvp]:          http://www.kaufmann.no/roland/dvorak/
[xmodmap]:      http://vim.wikia.com/wiki/Map_caps_lock_to_escape_in_XWindows
[xcape]:        https://github.com/alols/xcape
[karabiner]:    https://github.com/tekezo/Karabiner
[neovim]:       http://neovim.io/
[vim_zenburn]:  /downloads/vimstory/vim_zenburn.png
